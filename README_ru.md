# Бот ProTracker

Этот бот служит простым и интуитивно понятным планировщиком задач, предлагая краткую аналитику для вашего списка задач. Он использует линейную регрессию для прогнозирования часов завершения задачи в момент её создания. Для сбора данных о паттернах пользовательского поведения и рабочих рутинах проводится опрос, за которым следует предварительная обработка данных и генерация необходимых данных для обучения модели. Проект будет продолжать совершенствоваться и улучшаться.

## Команды бота

- `/start` - начать бота
- `/survey` - начать опрос для сбора данных о рабочих паттернах пользователя
- `/info` - информация о боте (краткая, URL)
- `/new_task` - создать новую задачу в списке задач
- `/delete_task` - удалить задачу из списка задач
- `/analytics` - отправить несколько графиков о категориях задач пользователя
- `/task_info` - отправить информацию о задаче (дата, приоритет, сложность, сколько часов требуется для выполнения задачи)

## Установка

1. Клонируйте этот репозиторий:

    ```bash
    https://github.com/frenchiesko/protracker-bot.git
    ```

2. Перейдите в директорию проекта:

    ```bash
    cd protracker-bot
    ```

3. Установите зависимости:

    ```bash
    pip install -r requirements.txt
    ```

4. Создайте файл конфигурации `.env` и укажите API TOKEN (получите его от @BotFather):

    ```
    TOKEN=your_token
    ```

5. Запустите бота командой:

    ```bash
    python main.py
    ```

## Файлы бота

- `main.py` - Основной файл бота, ввод и обработка сообщений пользователя
- `survey.py` - Файл, отвечающий за проведение начального опроса для сбора коэффициентов для модели, которые затем используются в предобработке и генерации обучающего набора данных в `model.py`
- `task_survey.py` - Файл, отвечающий за сбор данных при создании новой задачи для последующего анализа и прогнозирования из `model.py`
- `task_manager.py` - Файл, реализующий хранение, добавление, удаление задач, отображение информации о задаче и представление визуальной аналитики
- `model.py` - Файл, где происходит предобработка данных из опросов и задач, включая вычисление коэффициентов, генерацию данных, обучение модели и выполнение прогнозов

## Функции и классы

### Машинное обучение

Процесс машинного обучения включает следующие этапы:

1. Ответы из `survey.py` передаются в класс `Preprocessor` в `model.py`, где они обрабатываются (форматируются, кодируются).
2. Обработанные данные затем передаются в класс `DataGenerator` в функцию `get_weights`. В этой функции получаются коэффициенты (`coef_`) и перехват (`intercept_`) из обученной модели линейной регрессии на основе обработанных данных.
3. В том же классе функция `generate_data` случайным образом создает обучающий набор данных с 5 признаками. После генерации признаков значения целевой переменной рассчитываются по формуле: `y_i = intercept_ + (x_1*coef_1 + ... + x_n*coef_n)`
4. После генерации данных модель линейной регрессии обучается на наборе данных после предобработки и кодирования данных. Для оценки модели используются метрики R2-score и MAE.
5. Обученная модель затем сохраняется и используется для выполнения прогнозов после создания каждой задачи, при условии, что пользователь вводит данные в правильном формате.

### Классы и функции машинного обучения

- `Preprocessor` класс: Обрабатывает ответы из опроса, включая форматирование и кодирование.
- `DataGenerator` класс: Генерирует обучающий набор данных и получает коэффициенты и перехват из обученной модели линейной регрессии.
- `get_weights` функция: Извлекает коэффициенты и перехват из обученной модели линейной регрессии.
- `generate_data` функция: Генерирует обучающий набор данных с 5 признаками и рассчитывает значения целевой переменной.

### Оценка модели

Для оценки обученной модели линейной регрессии используются метрики R2-score и MAE.

## Использование

- Убедитесь, что вы запустили `survey.py`, чтобы собрать ответы из опроса.
- Передайте собранные ответы в класс `Preprocessor` в `model.py` для обработки данных.
- Используйте обработанные данные в качестве входных данных для класса `DataGenerator` и вызовите функцию `get_weights`, чтобы получить коэффициенты и перехват из обученной модели линейной регрессии.
- Вызовите функцию `generate_data` в классе `DataGenerator` для создания обучающего набора данных и расчета значений целевой переменной.
- Предварительно обработайте и закодируйте сгенерированные данные перед обучением модели линейной регрессии.
- Используйте метрики R2-score и MAE для оценки обученной модели.
- Сохраните обученную модель для последующего использования.
- Делайте прогнозы с использованием сохраненной модели после создания каждой задачи, обеспечивая правильный формат ввода данных пользователем.

Обратите внимание, что точность прогнозов может варьироваться в зависимости от качества и количества собранных ответов из опроса.

## Технологический стек

**Машинное обучение и аналитика:** pandas, numpy, scikit-learn, matplotlib, seaborn

## Лицензия

[MIT](https://choosealicense.com/licenses/mit/)
